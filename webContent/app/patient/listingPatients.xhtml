<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:shiro="http://shiro.apache.org/tags"
                template="../../WEB-INF/template/template.xhtml">

        <style type="text/css">
            .ui-datatable .ui-datatable-header {
                text-align: right !important;
            }

            .ui-selectcheckboxmenu-panel .ui-selectcheckboxmenu-header .ui-chkbox {
                display: none;
            }
        </style>
        <ui:define name="title">Listing patient</ui:define>
        <ui:define name="viewname">
            <li>Pages</li>
            <li>/</li>
        </ui:define>
        <ui:define name="content">
            <div class="ui-g">
                <div class="ui-g-12">
                    <div class="card">
                        <h1>Listing des patients</h1>
                        <h:form id="form">
                            <p:messages id="messages" />

                            <p:dataTable id="tablePatient" var="patient" value="#{patientBean.patients}" widgetVar="patientTable" multiViewState="true"
                                         rows="10" paginator="true"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,15"
                                         selectionMode="single" selection="#{patientBean.selectedPatient}" rowKey="#{patient.id}"
                                         emptyMessage="Aucun patient trouvé" filteredValue="#{patientBean.filteredPatients}"
                            >

                                <f:facet name="header">
                                    <p:outputPanel>
                                        <h:outputText value="Search all fields:" />
                                        <p:inputText id="globalFilter" onkeyup="PF('patientTable').filter()" style="width:150px" placeholder="Enter keyword"/>
                                    </p:outputPanel>
                                </f:facet>

                                <p:ajax event="rowSelect" update=":form:patientDetail" oncomplete="PF('patientDialog').show()" />

                                <c:set var="buttonText" value="#{patientBean.selectedPatient.lastName}" />


                                <p:column headerText="Id" filterBy="#{patient.id}" sortBy="#{patient.id}" filterMatchMode="contains">
                                    <h:outputText value="#{patient.id}" />
                                </p:column>

                                <p:column headerText="Prénom" filterBy="#{patient.firstName}" sortBy="#{patient.firstName}" filterMatchMode="startsWith">
                                    <h:outputText value="#{patient.firstName}" />
                                </p:column>

                                <p:column headerText="Nom" filterBy="#{patient.lastName}" sortBy="#{patient.lastName}" filterMatchMode="startsWith">
                                    <h:outputText value="#{patient.lastName}" />
                                </p:column>

                                <f:facet name="paginatorTopLeft">
                                    <p:commandButton value="Clear table state" action="#{patientBean.clearTableState}" update="@form" />
                                </f:facet>
                            </p:dataTable>
<!--                            Modal-->
                            <p:button value="Home" style="display:inline-block;margin-top:6px" icon="fa fa-home"/>
                            <h:outputScript library="js" name="listingPatients.js" />
                            <p:dialog header="Info patient" widgetVar="patientDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
                                <p:outputPanel id="patientDetail" style="text-align:center;">
                                    <p:panelGrid  columns="1" rendered="#{not empty patientBean.selectedPatient}" columnClasses="label,value">
                                        <p:tabView>
                                            <p:tab title="Information sur le patient">
                                                <h:panelGrid columns="2" cellpadding="10">
                                                    <h:outputText value="Id:" />
                                                    <h:outputText value="#{patientBean.selectedPatient.id}" />

                                                    <h:outputText value="Prénom" />
                                                    <h:outputText value="#{patientBean.selectedPatient.firstName}" />

                                                    <h:outputText value="Nom" />
                                                    <h:outputText id="modifiervaleur" value="#{patientBean.disabled}" />
                                                    <h:outputLabel for="test" value="Name:" />
                                                    <p:inputText id="test" label="name" value="Modifier" disabled="true"  />
                                                </h:panelGrid>
                                                <h:outputLabel for="ajax" value="Ajax:" />
                                                <p:inplace id="ajax" editor="true">
                                                    <p:inputText value="#{patientBean.selectedPatient.firstName}" required="true" label="text" />
                                                    <p:inputText value="#{patientBean.selectedPatient.lastName}" required="true" label="text" />
                                                </p:inplace>
                                                <p:commandButton icon="pi pi-search" title="Modifier" onclick="modify();">
                                                    Modifier
                                                </p:commandButton>
                                            </p:tab>
                                            <p:tab title="Dossiers du patient">
                                                <h:panelGrid columns="2" cellpadding="10">

                                                    <h:outputText value="Gestion de dossier like google drive" />
                                                </h:panelGrid>
                                            </p:tab>
                                            <p:tab title="Godfather Part III">
                                                <h:panelGrid columns="2" cellpadding="10">
                                                    <p:graphicImage name="demo/images/godfather/godfather3.jpg" />
                                                    <h:outputText value="After a break of more than 15 years, director Francis Ford Coppola and writer Mario Puzo returned to the well for this third and final story of the fictional Corleone crime family.
                    Two decades have passed, and crime kingpin Michael Corleone, now divorced from his wife Kay has nearly succeeded in keeping his promise that his family would one day be completely legitimate." />
                                                </h:panelGrid>
                                            </p:tab>
                                        </p:tabView>
                                    </p:panelGrid>
                                </p:outputPanel>
                            </p:dialog>
                        </h:form>
                    </div>
                </div>
            </div>

        </ui:define>

</ui:composition>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="../../WEB-INF/template/template.xhtml">

    <ui:define name="title">Dossier du patient</ui:define>
    <ui:define name="viewname">
        <li>Pages</li>
        <li>/</li>
    </ui:define>

    <ui:define name="content">
        <!-- TITLE BAR -->
        <ui:include src="patientMenu.xhtml"/>

        <h:form id="content" enctype="multipart/form-data">
            <p:growl id="msgs" showDetail="true"/>
            <!-- CONTENT -->
            <div class="ui-g">

                <!-- Ajout de documents -->
                <div class="ui-g-12 ui-md-12 ui-lg-6">
                    <p:panel id="patient-card">
                        <f:facet name="header">
                            <i class="fa fa-fw fa-address-card"/>
                            <text/>
                            <h:outputText value="Ajouter un document"/>
                        </f:facet>
                        <div class="panel-content">
                            <p:fileUpload listener="#{fileUploadBean.handleFileUpload}" mode="advanced" dragDropSupport="false"
                                          update="messages" fileLimit="3" allowTypes="/(\.|\/)(gif|jpe?g|png|pdf|doc|docx)$/" />

                            <p:growl id="messages" showDetail="true" />
                        </div>
                    </p:panel>
                </div>

                <!-- Liste des documents -->
                <div class="ui-g-12 ui-md-12 ui-lg-6">
                    <p:dataTable id="tablePatient" var="patient" value="#{patientBean.patients}" widgetVar="patientTable" multiViewState="true"
                                 rows="10" paginator="true"
                                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 rowsPerPageTemplate="5,10,15"
                                 emptyMessage="Aucun patient trouvé" filteredValue="#{patientBean.filteredPatients}"
                    >
                        <!--                                         selectionMode="single" selection="#{patientBean.selectedPatient}" rowKey="#{patient.id}"-->
                        <f:facet name="header">
                            <p:outputPanel>
                                <h:outputText value="Search all fields:" />
                                <p:inputText id="globalFilter" onkeyup="PF('patientTable').filter()" style="width:150px" placeholder="Enter keyword"/>
                            </p:outputPanel>
                        </f:facet>

                        <p:column headerText="Id" filterBy="#{patient.id}" sortBy="#{patient.id}" filterMatchMode="contains">
                            <h:outputText value="#{patient.id}" />
                        </p:column>

                        <p:column headerText="Prénom" filterBy="#{patient.firstName}" sortBy="#{patient.firstName}" filterMatchMode="startsWith">
                            <h:outputText value="#{patient.firstName}" />
                        </p:column>

                        <p:column headerText="Nom" filterBy="#{patient.lastName}" sortBy="#{patient.lastName}" filterMatchMode="startsWith">
                            <h:outputText value="#{patient.lastName}" />
                        </p:column>

                        <f:facet name="paginatorTopRight">
                            <p:commandButton value="Réinitialiser les filtres" action="#{patientBean.clearTableState}" update="@form" />
                        </f:facet>

                    </p:dataTable>
                </div>
            </div>
        </h:form>

    </ui:define>

</ui:composition>